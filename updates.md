# 浑天匣更新日志


#### 工刀181128，于浙大玉泉

### 181203 v3.3.6

- 去除获取子资源信息函数多余的`cover`字段
- 优化`response`函数，可以省略`body`调用
- 封面类型新增随机类型，完善修改封面函数

### 181128 v3.3.1

- 开始记录更新日志（也就是本文）
- 资源类新增`cover_type`属性，允许资源封面与父元素相同，或来自外部链接
- 优化错误类，并在API请求体中新加`identifier`字段
- 优化齐天簿获取信息失败时请求重新授权的操作

### 181127 v3.3.0

- 修复获取子资源信息函数没有返回`cover_small`信息的错误
- 取消`Error.NOT_YOUR_RESOURCE`错误的发布状态保护
- 在获取资源基本信息返回时增加`right_bubble`属性
- 路由归到`rt_res`中统一处理，取消资源链的处理方式，改用资源ID表示资源

### 181124 v3.2.6

- 新增移动资源API

### 181122 v3.2.4

- 资源上传容量上限提升至200M

### 181119 v3.2.3

- 修复获取资源基本信息没有返回`cover_small`信息的错误
- 删除旧版本开发环境下的资源上传模板及其他冗余函数
- 优化资源密钥使用机制，取消自动更改资源密钥

### 181113 v3.2.0

- 支持前端使用缩略图加载，获取资源信息新增`cover_small`字段

### 180924 v3.1.4

- 支持上传资源时自定义文件名

### *180509-180511* v4-istio

- 浑天匣ISTIO版本（毕设微服务版本）完成

### 180427 v3.1.3

- 优化新用户根目录默认介绍

### 180426 v3.1.2 beta

- 在需要获取用户信息的API中添加`User.update`以实时获取最新信息

### 180424 v3.1.0 beta

- 新用户授权后创建根目录
- 更新获取用户口令信息函数
- 修复创建用户不更新口令的错误
- 移除`/api/res/`路由，在`/api/user/`中直接获得用户信息

### 180423 v3.0.0 beta

- 取消老版本内测，接入齐天簿用户系统
- 移除资源类的`username`属性，新增`nickname`属性
- 优化配置类的使用

### 180313 v2.3.0 beta

- API返回时新增`status`字段表示系统处于开发或发布状态
- 对错误信息进行发布状态保护，发布状态下返回错误更笼统

### 180227 v2.2.0 beta

- 新增`requirements`文件，方便部署
- 优化错误类，并添加查看错误信息的API

### 180223 v2.1.0 beta

- 修改配置类的值属性最长支持255字节
- 优化错误类
- 优化函数返回类的构造函数

### 180221 v2.0.0 beta

- 支持项目内测
- 修改项目名为浑天匣
- 修复`nickname`不能为空的错误
- 完善用户名的错误提示信息

### 180220 v1.9.8 alpha

- 支持资源直链分享
- 支持访问错误跳转Github
- 取消上传链接时的描述字段

### 180219 v1.9.4 alpha

- 获取用户口令时新增返回头像
- 修复`get_right`函数如果用户为空时的错误

### 180218 v1.9.3 alpha

- 修复`secure_env`中可能产生死循环的粗呜

### 180217 v1.9.2 alpha

- 优化资源密钥的最小长度限制（3-16字符）
- 资源类新增`right_bubble`属性，表示是否允许权限冒泡访问
- 在返回资源信息时新增`right_bubble`信息
- 在返回资源信息时新增`secure_env`信息，表示当前资源是否处于安全的环境
- 使用gzip压缩API返回数据

### 180215 v1.8.8 alpha

- 添加用户权限表，对于已经填写过资源密钥的用户，在密钥没有被更换前可以重复访问

### 180202 v1.8.4 alpha

- 添加获取资源基本信息API
- 把`parent_id`改为`parent_str_id`
- 修复`res_id`改为`res_str_id`后，七牛回调信息产生的错误

### 180201 v1.8.0 alpha

- 取消不安全的递增数字ID，换用随机字符串作为资源ID
- 在返回资源信息时新增`is_home`字段，表示当前资源是否为用户的根目录

### 180127 v1.7.0 alpha

- 支持修改资源名称

### 180125 v1.6.7 alpha

- 路由类支持返回`OPTIONS`方法请求
- 支持资源删除与重命名操作

### 180124 v1.6.3 alpha

- 支持下载资源直接跳转

### 180123 v1.6.1 alpha

- 新增目录资源无需资源介绍

### 180122 v1.6.0 alpha

- 资源类新增`create_time`属性
- 支持资源访问密钥动态改变

### 180121 v1.5.4 alpha

- 在获取资源信息时直接返回资源密钥

### 180118 v1.5.2 alpha

- 在获取资源信息时新增下载量信息
- 在获取资源信息时新增资源大小信息
- 增加用户口令有效时长为7天
- 修复资源链解析的错误

### 180115 v1.4.3 alpha

- 支持七牛图片缩略图返回

### 180113 v1.4.2 alpha

- 修改七牛重定向为回调函数
- 添加回调函数的头校验
- 添加说明文档
- 获取子资源信息时添加子类型属性
- 修复获取封面URL的错误
- 修复封面政策的错误
- 将`require_post`和`require_put`的传入参数`decode`设为默认`False`
- 统一获取七牛上传头像口令的格式
- 修复修改资源信息时资源状态为空产生的错误
- 在`field_validator`函数中添加`TypeError`

### 180112 v1.2.2 alpha

- 支持PEP8代码风格
- 添加资源封面上传
- 增加封面上传大小上限
- 资源上传时分享状态默认私有
- 新增链接资源上传
- 更改错误类的错误起名格式

### 180111 v1.1.0 alpha

- `validate`函数添加参数预处理功能
- 路由的`resource`缩写为`res`
- 添加修改资源信息API
- 添加获取当前用户根目录API
- 把获取用户信息的`user_id`改为`username`
- 资源类添加`sub_type`表示资源文件类型
- 资源类添加`dlcount`表示下载次数
- 优化`field_validator`函数，发现存在`attr_TUPLE`则自动判断

### 180108 v1.0.0alpha

- 后端设计大致完成
- 添加获取用户信息API
- 添加函数说明
- 在`settings.py`中添加`Token`头